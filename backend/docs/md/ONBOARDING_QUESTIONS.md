# Вопросы опросника при регистрации

## Структура опросника

Опросник разделен на несколько шагов для удобства заполнения.

### Шаг 1: Основная информация о заведении

**1. Название заведения** (обязательно)
- Тип: текст
- Пример: "Кафе Москва", "Ресторан Уютный"
- Сохраняется в: `Establishment.Name`

**2. Адрес заведения** (обязательно)
- Тип: текст
- Пример: "ул. Тверская, д. 1"
- Сохраняется в: `Establishment.Address`

**3. Телефон** (обязательно)
- Тип: телефон
- Валидация: формат телефона
- Пример: "+7 999 123-45-67"
- Сохраняется в: `Establishment.Phone`

**4. Email заведения** (опционально)
- Тип: email
- Валидация: формат email
- Пример: "info@cafe-moscow.ru"
- Сохраняется в: `Establishment.Email`

---

### Шаг 2: Тип заведения

**5. Какой тип заведения?** (обязательно)
- Тип: выбор из списка
- Варианты:
  - `restaurant` - Ресторан
  - `cafe` - Кафе
  - `fast_food` - Фаст-фуд
  - `bar` - Бар
  - `pizzeria` - Пиццерия
  - `bakery` - Пекарня
  - `coffee_shop` - Кофейня
  - `takeaway` - На вынос
  - `delivery` - Доставка
  - `other` - Другое
- Сохраняется в: `Establishment.Type`

---

### Шаг 3: Формат обслуживания

**6. Есть ли сидячие места?** (обязательно)
- Тип: да/нет (boolean)
- Влияние: 
  - Если `true` - в PWA будут доступны столы и схема зала
  - Если `false` - только список товаров для быстрой продажи
- Сохраняется в: `Establishment.HasSeatingPlaces`

**7. Количество столов** (условно обязательно, если есть сидячие места)
- Тип: число
- Условие: показывается только если `has_seating_places = true`
- Валидация: минимум 1, максимум 200
- Пример: 10, 25, 50
- Сохраняется в: `Establishment.TableCount`
- Примечание: Автоматически создаются столы с номерами от 1 до указанного количества

**8. Принимаете ли заказы на вынос?** (обязательно)
- Тип: да/нет (boolean)
- По умолчанию: `true`
- Сохраняется в: `EstablishmentSettings.HasTakeaway`

**9. Есть ли доставка?** (обязательно)
- Тип: да/нет (boolean)
- По умолчанию: `false`
- Сохраняется в: `EstablishmentSettings.HasDelivery`

**10. Принимаете ли бронирования столов?** (обязательно)
- Тип: да/нет (boolean)
- Условие: показывается только если `has_seating_places = true`
- По умолчанию: `false`
- Сохраняется в: `EstablishmentSettings.HasReservations`

---

### Шаг 4: Дополнительные настройки (опционально)

**11. Валюта** (опционально)
- Тип: выбор из списка
- Варианты: 〒 (тенге), ₽ (рубль), $ (доллар), € (евро)
- По умолчанию: 〒 (тенге)
- Сохраняется в: `EstablishmentSettings.Currency`

**12. Часовой пояс** (опционально)
- Тип: выбор из списка
- По умолчанию: UTC+6 (Алматы)
- Сохраняется в: `EstablishmentSettings.Timezone`

**13. Язык интерфейса** (опционально)
- Тип: выбор из списка
- Варианты: ru (Русский), kk (Қазақша), en (English)
- По умолчанию: ru
- Сохраняется в: `EstablishmentSettings.Language`

---

## Структура JSON запроса

```json
{
  "establishment_name": "Кафе Москва",
  "address": "ул. Тверская, д. 1",
  "phone": "+7 999 123-45-67",
  "email": "info@cafe-moscow.ru",
  "type": "cafe",
  "has_seating_places": true,
  "table_count": 10,
  "has_takeaway": true,
  "has_delivery": false,
  "has_reservations": true,
  "currency": "〒",
  "timezone": "Asia/Almaty",
  "language": "ru"
}
```

## Валидация

### Обязательные поля:
- `establishment_name`
- `address`
- `phone`
- `type`
- `has_seating_places`
- `has_takeaway`
- `has_delivery`

### Условно обязательные:
- `table_count` - обязателен если `has_seating_places = true`
- `has_reservations` - обязателен если `has_seating_places = true`

### Опциональные:
- `email`
- `currency`
- `timezone`
- `language`

## Логика создания

После заполнения опросника:

1. Создается `Establishment` с указанными данными
2. Если `has_seating_places = true` и указан `table_count`:
   - Автоматически создаются столы с номерами от 1 до `table_count`
   - Каждый стол имеет `capacity = 4` по умолчанию
   - Координаты устанавливаются в (0, 0) - администратор расставит позже
3. Создаются настройки заведения (`EstablishmentSettings`)
4. Устанавливается `User.OnboardingCompleted = true`
5. Связывается `User.EstablishmentID` с созданным заведением

## Альтернативный вариант (упрощенный)

Если нужно сделать опросник короче, можно оставить только критичные вопросы:

### Минимальный набор:
1. Название заведения
2. Адрес
3. Телефон
4. Тип заведения
5. Есть ли сидячие места?
6. Количество столов (если есть)
7. На вынос? (да/нет)
8. Доставка? (да/нет)

Остальные настройки можно будет изменить позже в админ-панели.
